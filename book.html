<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Now - GasGo</title>
  <link rel="stylesheet" href="book.css" />
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>
</head>
<body>

<!-- Navbar -->
<header class="navbar">
  <div class="container nav-container">
    <h1 class="logo">GasGo</h1>
    <nav>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="book-now.html" class="active">Order Now</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Booking Section -->
<section class="form-section">
  <div class="container">
    <h2>Order Your Gas Delivery</h2>
    <p>Schedule your gas refill or order a new cylinder in just a few clicks.</p>

    <form id="bookingForm" class="form-card">
      <!-- Name -->
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" required />

      <!-- Phone -->
      <label for="phone">Phone Number</label>
      <input type="tel" id="phone" name="phone" required />

      <!-- Service Type -->
      <label for="service">Service Type</label>
      <select id="service" name="service" required>
        <option value="refill">Gas Cylinder Refill</option>
        <option value="new">Order New Cylinder</option>
      </select>

      <!-- Gas Brand -->
      <div id="gasBrandContainer">
        <label for="gasBrand">Gas Brand</label>
        <select id="gasBrand" name="gasBrand">
          <option>K-Gas</option>
          <option>Total Gas</option>
          <option>Top Gas</option>
          <option>City Gas</option>
          <option>AfriGas</option>
          <option>ProGas</option>
          <option>Rubis</option>
          <option>Mengas</option>
          <option>Other</option>
        </select>
      </div>

      <!-- Gas Type -->
      <div id="gasTypeContainer">
        <label for="gasType">Type of Gas</label>
        <select id="gasType" name="gasType">
          <option value="6kg">6 Kg</option>
          <option value="13kg">13 Kg</option>
          <option value="50kg">50 Kg</option>
        </select>
      </div>

      <!-- Date -->
      <label for="date">Preferred Date</label>
      <input type="date" id="date" name="date" required />
      <!-- Time -->
      <label for="time">Preferred Time</label>
      <input type="time" id="time" name="time" required />


      <!-- Map -->
      <label>Pin Your Location</label>
      <div id="map" class="map"></div>
      <button type="button" id="pinLocationBtn" class="btn-secondary">üìç Pin My Current Location</button>
      <input type="hidden" id="latitude" name="latitude" />
      <input type="hidden" id="longitude" name="longitude" />

      <!-- Submit -->
      <button type="submit" class="btn-primary">Confirm Booking</button>
    </form>
  </div>
</section>

<script>
  const prices = {
    refill: {
      "K-Gas": { "6kg": 1200, "13kg": 2500, "50kg": 9000 },
      "Total Gas": { "6kg": 1250, "13kg": 2600, "50kg": 9200 },
      "Top Gas": { "6kg": 1180, "13kg": 2450, "50kg": 8800 },
      "City Gas": { "6kg": 1190, "13kg": 2480, "50kg": 8900 },
      "AfriGas": { "6kg": 1220, "13kg": 2520, "50kg": 9100 },
      "ProGas": { "6kg": 1210, "13kg": 2500, "50kg": 9050 },
      "Rubis": { "6kg": 1230, "13kg": 2550, "50kg": 9150 },
      "Mengas": { "6kg": 1150, "13kg": 2400, "50kg": 8700 },
      "Other": { "6kg": 1200, "13kg": 2500, "50kg": 9000 }
    },
    new: {
      "K-Gas": { "6kg": 4500, "13kg": 6500, "50kg": 15000 },
      "Total Gas": { "6kg": 4600, "13kg": 6600, "50kg": 15200 },
      "Top Gas": { "6kg": 4400, "13kg": 6400, "50kg": 14800 },
      "City Gas": { "6kg": 4450, "13kg": 6450, "50kg": 14900 },
      "AfriGas": { "6kg": 4550, "13kg": 6550, "50kg": 15100 },
      "ProGas": { "6kg": 4480, "13kg": 6480, "50kg": 14950 },
      "Rubis": { "6kg": 4520, "13kg": 6520, "50kg": 15050 },
      "Mengas": { "6kg": 4300, "13kg": 6300, "50kg": 14600 },
      "Other": { "6kg": 4400, "13kg": 6400, "50kg": 14800 }
    }
  };

  // Dropdown logic
  document.getElementById('service').addEventListener('change', function () {
    document.getElementById('gasBrandContainer').classList.toggle('hidden', !(this.value));
    document.getElementById('gasTypeContainer').classList.add('hidden');
  });

  document.getElementById('gasBrand').addEventListener('change', function () {
    document.getElementById('gasTypeContainer').classList.toggle('hidden', !this.value);
  });

  // Map logic
  let map, marker;
  function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
      center: { lat: -1.2921, lng: 36.8219 },
      zoom: 12,
    });
    map.addListener("click", (event) => placeMarker(event.latLng));
  }

  function placeMarker(location) {
    if (marker) {
      marker.setPosition(location);
    } else {
      marker = new google.maps.Marker({ position: location, map: map });
    }
    document.getElementById('latitude').value = location.lat();
    document.getElementById('longitude').value = location.lng();
  }

  document.getElementById('pinLocationBtn').addEventListener('click', () => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition((pos) => {
        const lat = pos.coords.latitude;
        const lng = pos.coords.longitude;
        const loc = { lat, lng };
        map.setCenter(loc);
        placeMarker(loc);
        const btn = document.getElementById('pinLocationBtn');
        btn.textContent = '‚úÖ Location Pinned';

        // WhatsApp message with location link
        const message = `My current location is: https://www.google.com/maps/search/?api=1&query=${lat},${lng}`;

        // Encode message for URL
        const encodedMessage = encodeURIComponent(message);

        // Open WhatsApp chat URL
        const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
        window.open(whatsappUrl, '_blank');
      }, () => alert('Unable to retrieve your location.'));
    } else {
      alert('Geolocation is not supported by your browser.');
    }
  });

  // Form submit
  document.getElementById('bookingForm').addEventListener('submit', function (e) {
    e.preventDefault();
    const name = document.getElementById('name').value;
    const phone = document.getElementById('phone').value;
    const service = document.getElementById('service').value;
    const brand = document.getElementById('gasBrand').value;
    const type = document.getElementById('gasType').value;
    const date = document.getElementById('date').value;
    const lat = document.getElementById('latitude').value;
    const lng = document.getElementById('longitude').value;

    let total = 0;
    if (service && brand && type) total = prices[service][brand][type] || 0;

    const receipt = window.open('', '_blank');
    receipt.document.write(`
      <html>
        <head><title>GasGo Receipt</title></head>
        <body>
          <h2>GasGo Booking Receipt</h2>
          <p><strong>Name:</strong> ${name}</p>
          <p><strong>Phone:</strong> ${phone}</p>
          <p><strong>Service:</strong> ${service}</p>
          <p><strong>Gas Brand:</strong> ${brand}</p>
          <p><strong>Gas Type:</strong> ${type}</p>
          <p><strong>Date:</strong> ${date}</p>
          <p><strong>Location:</strong> ${lat}, ${lng}</p>
          <p><strong>Total Price:</strong> KES ${total.toLocaleString()}</p>
        </body>
      </html>
    `);
    receipt.print();
  });
</script>
<!-- Footer -->
<footer class="bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white pt-12" id="contact">
  <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-10">

    <!-- Brand -->
    <div>
      <h2 class="text-3xl font-extrabold mb-4">GasGo</h2>
      <p class="text-gray-300 leading-relaxed">
        Your trusted partner for fast, safe, and reliable gas delivery right to your doorstep.
      </p>
      <div class="mt-5">
        <a href="book.html" class="bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-lg shadow-md transition">
          Order Now
        </a>
      </div>
    </div>

    <!-- Quick Links -->
    <div>
      <h4 class="text-lg font-semibold mb-4 border-b border-blue-500 pb-2">Quick Links</h4>
      <ul class="space-y-3">
        <li><a href="index.html" class="hover:text-blue-400 transition">üè† Home</a></li>
        <li><a href="about.html" class="hover:text-blue-400 transition">‚Ñπ About Us</a></li>
        <li><a href="service.html" class="hover:text-blue-400 transition">üõ† Services</a></li>
        <li><a href="book.html" class="hover:text-blue-400 transition">üìÖ Book Now</a></li>
        <li><a href="contactus.html" class="hover:text-blue-400 transition">üìû Contact Us</a></li>
      </ul>
    </div>

    <!-- Contact Info -->
    <div>
      <h4 class="text-lg font-semibold mb-4 border-b border-blue-500 pb-2">Contact</h4>
      <ul class="space-y-3 text-gray-300">
        <li>üìû +254 712 345 678</li>
        <li>‚úâ info@gasgo.com</li>
        <li>üìç Nairobi, Kenya</li>
      </ul>
    </div>

    <!-- Social -->
    <div>
      <h4 class="text-lg font-semibold mb-4 border-b border-blue-500 pb-2">Follow Us</h4>
      <div class="flex space-x-5 text-2xl">
        <a href="https://facebook.com/yourpage" target="_blank" rel="noopener" class="hover:text-blue-600 text-blue-700 transition" aria-label="Facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://wa.me/254712345678" target="_blank" rel="noopener" class="hover:text-green-500 text-green-600 transition" aria-label="WhatsApp">
          <i class="fab fa-whatsapp"></i>
        </a>
        <a href="https://t.me/yourtelegram" target="_blank" rel="noopener" class="hover:text-blue-400 text-blue-500 transition" aria-label="Telegram">
          <i class="fab fa-telegram-plane"></i>
        </a>
        <a href="https://instagram.com/yourhandle" target="_blank" rel="noopener" class="hover:text-pink-500 text-pink-600 transition" aria-label="Instagram">
          <i class="fab fa-instagram"></i>
        </a>
      </div>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="mt-10 border-t border-gray-700 py-5 text-center text-gray-400 text-sm">
    <p>¬© <span id="year"></span> GasGo. All rights reserved.</p>
  </div>
</footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();
</script>

  <!-- JavaScript -->
  <script>
    // Mobile Nav Toggle
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    navToggle.addEventListener('click', () => {
      navMenu.classList.toggle('show');
    });

    // Auto-update year
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
<!-- Floating WhatsApp Button -->
<a href="https://wa.me/254790508310" target="_blank" rel="noopener" 
   class="fixed bottom-6 right-6 bg-green-600 hover:bg-green-700 text-white p-4 rounded-full shadow-lg flex items-center justify-center transition"
   aria-label="Chat on WhatsApp">
  <i class="fab fa-whatsapp text-2xl"></i>
</a>

</body>
</html>

</body>
</html>
